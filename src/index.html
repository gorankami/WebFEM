<!--
    Copyright 2014 Goran Antic

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<!DOCTYPE html>

<html>
  <head>
    <title>Web FEM</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
    <!--<link href="~/Styles/bootstrap.min.css" rel='stylesheet' type='text/css' />-->
    <link href="assets/style.css" rel="stylesheet" type='text/css'/>
    <script type="application/javascript">
      var MESH_ID = 1;
      var THREE = {};
    </script>
    <script src="lib/jquery.min.js"></script>
    <script src="lib/gl-matrix.js"></script>
    <script src="lib/angular.min.js"></script>
    <script src="lib/Color.js"></script>
    <script>
//      var Color = THREE.Color;
    </script>
  </head>
  <body ng-app="WebFEMView" ng-controller="WebFEMController">
    <div ng-show="toggleCurtain" class="curtain"><p>Downloading model, please wait...</p></div>
    <!-- absolute content with palettes -->
    <div id="sidebar" class="tool-panel absolute">
      <div class="left">

        <ul class="left">
          <li>
            <b>Variable:</b><br/>
            <select ng-model="selectedVariable">
              <option ng-repeat="variable in variables" value="{{variable.value}}">{{variable.name}}</option>
            </select>
          </li>
          <li>
            <b>Component:</b><br/>
            <select ng-model="selectedComponent">
              <option ng-repeat="component in components" value="{{component.value}}">{{component.name}}</option>
            </select>
          </li>
          <li>
            <b>Step:</b><br/>
            <input ng-model="selectedStep" type="number"/>
          </li>
          <li>
            <b>&nbsp;</b><br/>
            <button class="btn left" ng-click="downloadMesh()">Load</button>
          </li>
          <li>
            <input type="checkbox" ng-model="clipPlane.active" ng-change="reDraw()"/>Clip plane<br/>
            <div ng-show="clipPlane.active">
              <button class="btn" ng-click="centerPlaneForClipping();reDraw();">Reset</button>
              Position xyz:
              <input type="number" ng-model="clipPlane.base[0]" ng-change="reDraw()"/>
              <input type="number" ng-model="clipPlane.base[1]" ng-change="reDraw()"/>
              <input type="number" ng-model="clipPlane.base[2]" ng-change="reDraw()"/>
              Normal xyz:
              <input type="number" ng-model="clipPlane.normal[0]" ng-change="reDraw()"/>
              <input type="number" ng-model="clipPlane.normal[1]" ng-change="reDraw()"/>
              <input type="number" ng-model="clipPlane.normal[2]" ng-change="reDraw()"/>

              <button class="btn" ng-click="downloadMesh(true)">Apply</button>
            </div>

          </li>
        </ul>
        <div class="clear"></div>
      </div>
    </div>
    <div class="tool-panel right">
      <b>Palettes:</b><br/>
      <select ng-model="palettes.selectedPalette"
              ng-options="palette.name for palette in palettes track by palette.id"
              ng-selected="drawLegend();reDraw();"></select><br/>
      Number of steps:<br/><input id="tbNumSteps" type="number" ng-model="numSteps"/><br/>
      <input ng-model="inverted" type="checkbox" ng-change="drawLegend();reDraw();"/>Inverted<br/>
      <button class="btn" ng-click="applyColorMap();reDraw();">Apply</button>
      <canvas id="cvsLegend" width="150" height="500"></canvas>
    </div>
    <!-- model view -->
    <canvas id="cvsFEM"></canvas>

    <!-- orientation axes -->
    <!--<canvas id="cvsOrientation"></canvas>-->

    <!-- scripts -->
    <script src="js/webgl/3DObjects/MeshColoured.js"></script>
    <script src="js/webgl/3DObjects/MeshWireframe.js"></script>
    <script src="js/webgl/3DObjects/MeshClipColoured.js"></script>
    <script src="js/webgl/3DObjects/MeshClipWireframe.js"></script>
    <script src="js/webgl/3DObjects/ClipPlane.js"></script>
    <script src="js/webgl/3DObjects/OrientationHelper.js"></script>

    <script src="js/webgl/Camera.js"></script>
    <script src="js/webgl/ShaderProgram.js"></script>
    <script src="js/webgl/Renderer.js"></script>

    <script src="js/TransformationController.js"></script>
    <script src="js/FEMView.js"></script>
    <script src="js/LegendView.js"></script>

    <script src="js/ngModule.js"></script>
  </body>
</html>